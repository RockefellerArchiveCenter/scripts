#!/usr/bin/env python

import os
import requests
import json
import sys

# the base URL of your ArchivesSpace installation
baseURL = 'http://192.168.50.7:8089'
# the id of your repository
repository = '2'
# the username to authenticate with
user = 'api-bot'
# the password for the username above
password = 'rockefe1ler'
# a list of resource IDs to publish
publishIDs = ["FA001",
"FA002",
"FA003",
"FA004",
"FA005",
"FA007",
"FA008",
"FA009",
"FA010",
"FA012",
"FA013",
"FA014",
"FA015",
"FA016",
"FA017",
"FA018",
"FA019",
"FA020",
"FA021",
"FA023",
"FA024",
"FA025",
"FA026",
"FA027",
"FA028",
"FA029",
"FA030",
"FA031",
"FA032",
"FA033",
"FA034",
"FA035",
"FA036",
"FA037",
"FA038",
"FA039",
"FA040",
"FA041",
"FA042",
"FA043",
"FA044",
"FA045",
"FA046",
"FA047",
"FA048",
"FA049",
"FA050",
"FA051",
"FA052",
"FA053",
"FA054",
"FA055",
"FA056",
"FA057",
"FA058",
"FA059",
"FA060",
"FA061",
"FA062",
"FA063",
"FA064",
"FA065",
"FA066",
"FA067",
"FA068",
"FA069",
"FA070",
"FA071",
"FA072",
"FA073",
"FA074",
"FA075",
"FA076",
"FA077",
"FA078",
"FA079",
"FA080",
"FA081",
"FA082",
"FA083",
"FA084",
"FA085",
"FA086",
"FA087",
"FA088",
"FA089",
"FA090",
"FA091",
"FA092",
"FA093",
"FA095",
"FA096",
"FA097",
"FA098",
"FA099",
"FA100",
"FA1000",
"FA1016",
"FA1017",
"FA1021",
"FA103",
"FA104",
"FA1040",
"FA1049",
"FA1053",
"FA1056",
"FA106",
"FA1067",
"FA1068",
"FA107",
"FA108",
"FA109",
"FA111",
"FA1111",
"FA1112",
"FA1115",
"FA1118",
"FA112",
"FA113",
"FA114",
"FA115",
"FA116",
"FA117",
"FA118",
"FA119",
"FA120",
"FA121",
"FA122",
"FA123",
"FA124",
"FA125",
"FA126",
"FA127",
"FA128",
"FA129",
"FA130",
"FA131",
"FA132",
"FA133",
"FA134",
"FA135",
"FA136",
"FA137",
"FA138",
"FA139",
"FA140",
"FA141",
"FA142",
"FA143",
"FA144",
"FA145",
"FA146",
"FA147",
"FA149",
"FA150",
"FA151",
"FA152",
"FA154",
"FA155",
"FA156",
"FA157",
"FA158",
"FA159",
"FA160",
"FA161",
"FA162",
"FA163",
"FA164",
"FA165",
"FA166",
"FA167",
"FA168",
"FA169",
"FA170",
"FA171",
"FA172",
"FA173",
"FA174",
"FA175",
"FA176",
"FA177",
"FA178",
"FA179",
"FA180",
"FA181",
"FA182",
"FA183",
"FA184",
"FA185",
"FA186",
"FA187",
"FA188",
"FA189",
"FA190",
"FA191",
"FA192",
"FA193",
"FA194",
"FA195",
"FA196",
"FA197",
"FA198",
"FA199",
"FA200",
"FA201",
"FA202",
"FA203",
"FA204",
"FA205",
"FA207",
"FA208",
"FA209",
"FA210",
"FA211",
"FA213",
"FA214",
"FA215",
"FA216",
"FA217",
"FA218",
"FA220",
"FA221",
"FA222",
"FA223",
"FA224",
"FA225",
"FA226",
"FA227",
"FA228",
"FA229",
"FA230",
"FA231",
"FA232",
"FA233",
"FA234",
"FA235",
"FA237",
"FA238",
"FA239",
"FA240",
"FA241",
"FA242",
"FA244",
"FA245",
"FA246",
"FA247",
"FA248",
"FA249",
"FA250",
"FA252",
"FA257",
"FA259",
"FA260",
"FA263",
"FA264",
"FA265",
"FA266",
"FA268",
"FA269",
"FA272",
"FA273",
"FA274",
"FA275",
"FA276",
"FA277",
"FA278",
"FA279",
"FA280",
"FA281",
"FA282",
"FA283",
"FA284",
"FA285",
"FA286",
"FA287",
"FA288",
"FA289",
"FA290",
"FA291",
"FA292",
"FA293",
"FA294",
"FA295",
"FA296",
"FA297",
"FA298",
"FA299",
"FA300",
"FA301",
"FA302",
"FA303",
"FA304",
"FA305",
"FA306",
"FA307",
"FA308",
"FA310",
"FA312",
"FA313",
"FA314",
"FA315",
"FA316",
"FA317",
"FA318",
"FA319",
"FA320",
"FA321",
"FA322",
"FA323",
"FA324",
"FA325",
"FA326",
"FA327",
"FA329",
"FA334",
"FA335",
"FA336",
"FA337",
"FA338",
"FA339",
"FA340",
"FA341",
"FA342",
"FA343",
"FA344",
"FA345",
"FA346",
"FA347",
"FA348",
"FA349",
"FA350",
"FA351",
"FA352",
"FA353",
"FA354",
"FA355",
"FA356",
"FA357",
"FA358",
"FA359",
"FA360",
"FA361",
"FA362",
"FA363",
"FA364",
"FA365",
"FA366",
"FA367",
"FA368",
"FA369",
"FA370",
"FA371",
"FA372",
"FA373",
"FA374",
"FA375",
"FA376",
"FA377",
"FA378",
"FA379",
"FA380",
"FA381",
"FA382",
"FA383",
"FA384",
"FA385",
"FA386",
"FA387",
"FA388",
"FA389",
"FA390",
"FA391",
"FA392",
"FA393",
"FA394",
"FA395",
"FA396",
"FA397",
"FA398",
"FA399",
"FA400",
"FA401",
"FA402",
"FA403",
"FA405",
"FA406",
"FA407",
"FA416",
"FA417",
"FA418",
"FA419",
"FA420",
"FA421",
"FA423",
"FA425",
"FA426",
"FA428",
"FA429",
"FA430",
"FA431",
"FA432",
"FA433",
"FA434",
"FA436",
"FA437",
"FA438",
"FA439",
"FA440",
"FA441",
"FA443",
"FA445",
"FA446",
"FA447",
"FA448",
"FA449",
"FA450",
"FA451",
"FA452",
"FA453",
"FA454",
"FA455",
"FA456",
"FA457",
"FA458",
"FA459",
"FA460",
"FA461",
"FA463",
"FA464",
"FA465",
"FA466",
"FA467",
"FA468",
"FA469",
"FA471",
"FA474",
"FA475",
"FA476",
"FA477",
"FA479",
"FA484",
"FA485",
"FA486",
"FA487",
"FA497",
"FA499",
"FA500",
"FA501",
"FA502",
"FA503",
"FA504",
"FA505",
"FA506",
"FA507",
"FA508",
"FA509",
"FA510",
"FA511",
"FA512",
"FA513",
"FA514",
"FA515",
"FA516",
"FA517",
"FA518",
"FA519",
"FA520",
"FA521",
"FA522",
"FA523",
"FA524",
"FA525",
"FA526",
"FA527",
"FA528",
"FA529",
"FA530",
"FA531",
"FA532",
"FA533",
"FA534",
"FA535",
"FA536",
"FA537",
"FA538",
"FA539",
"FA540",
"FA541",
"FA542",
"FA543",
"FA544",
"FA545",
"FA546",
"FA547",
"FA548",
"FA549",
"FA550",
"FA551",
"FA552",
"FA553",
"FA554",
"FA555",
"FA556",
"FA557",
"FA558",
"FA559",
"FA560",
"FA561",
"FA562",
"FA563",
"FA564",
"FA565",
"FA566",
"FA567",
"FA568",
"FA569",
"FA570",
"FA571",
"FA572",
"FA573",
"FA574",
"FA575",
"FA576",
"FA577",
"FA578",
"FA579",
"FA580",
"FA581",
"FA582",
"FA583",
"FA584",
"FA585",
"FA586",
"FA587",
"FA588",
"FA589",
"FA590",
"FA591",
"FA592",
"FA593",
"FA594",
"FA595",
"FA596",
"FA597",
"FA598",
"FA599",
"FA600",
"FA601",
"FA602",
"FA603",
"FA604",
"FA605",
"FA606",
"FA607",
"FA608",
"FA609",
"FA610",
"FA611",
"FA612",
"FA613",
"FA614",
"FA615",
"FA616",
"FA617",
"FA618",
"FA619",
"FA620",
"FA621",
"FA622",
"FA623",
"FA624",
"FA625",
"FA626",
"FA627",
"FA628",
"FA629",
"FA630",
"FA631",
"FA632",
"FA633",
"FA634",
"FA635",
"FA636",
"FA637",
"FA638",
"FA639",
"FA640",
"FA641",
"FA642",
"FA643",
"FA644",
"FA645",
"FA646",
"FA647",
"FA648",
"FA649",
"FA650",
"FA651",
"FA652",
"FA653",
"FA654",
"FA655",
"FA656",
"FA657",
"FA658",
"FA659",
"FA660",
"FA661",
"FA662",
"FA663",
"FA664",
"FA665",
"FA666",
"FA667",
"FA668",
"FA669",
"FA670",
"FA671",
"FA672",
"FA673",
"FA674",
"FA675",
"FA676",
"FA677",
"FA678",
"FA679",
"FA680",
"FA681",
"FA682",
"FA683",
"FA684",
"FA685",
"FA686",
"FA687",
"FA688",
"FA689",
"FA690",
"FA691",
"FA692",
"FA693",
"FA694",
"FA695",
"FA696",
"FA697",
"FA698",
"FA699",
"FA700",
"FA701",
"FA702",
"FA703",
"FA704",
"FA705",
"FA706",
"FA707",
"FA708",
"FA709",
"FA710",
"FA711",
"FA712",
"FA713",
"FA714",
"FA715",
"FA716",
"FA717",
"FA718",
"FA719",
"FA720",
"FA721",
"FA722",
"FA723",
"FA724",
"FA725",
"FA726",
"FA727",
"FA728",
"FA729",
"FA730",
"FA731",
"FA732",
"FA732A",
"FA732B",
"FA732C",
"FA732D",
"FA732E",
"FA732F",
"FA732G",
"FA732H",
"FA732I",
"FA733",
"FA734",
"FA735",
"FA736",
"FA738",
"FA741",
"FA742",
"FA744",
"FA745",
"FA746",
"FA747",
"FA748",
"FA749",
"FA750",
"FA751",
"FA752",
"FA753",
"FA754",
"FA755",
"FA756",
"FA758",
"FA759",
"FA762",
"FA766",
"FA802",
"FA806",
"FA807",
"FA808",
"FA810",
"FA811",
"FA812",
"FA813",
"FA814",
"FA815",
"FA816",
"FA817",
"FA818",
"FA819",
"FA821",
"FA822",
"FA823",
"FA824",
"FA825",
"FA826",
"FA827",
"FA828",
"FA829",
"FA830",
"FA831",
"FA832",
"FA833",
"FA834",
"FA835",
"FA836",
"FA837",
"FA839",
"FA840",
"FA841",
"FA842",
"FA843",
"FA844",
"FA845",
"FA846",
"FA847",
"FA849",
"FA850",
"FA851",
"FA852",
"FA853",
"FA854",
"FA855",
"FA856",
"FA857",
"FA858",
"FA859",
"FA860",
"FA861",
"FA862",
"FA863",
"FA865",
"FA866",
"FA867",
"FA868",
"FA869",
"FA870",
"FA872",
"FA875",
"FA876",
"FA877",
"FA878",
"FA879",
"FA880",
"FA881",
"FA882",
"FA883",
"FA884",
"FA885",
"FA886",
"FA887",
"FA889",
"FA890",
"FA891",
"FA892",
"FA893",
"FA894",
"FA895",
"FA896",
"FA897",
"FA898",
"FA899",
"FA901",
"FA902",
"FA903",
"FA904",
"FA905",
"FA908",
"FA909",
"FA910",
"FA911",
"FA912",
"FA913",
"FA914",
"FA915",
"FA916",
"FA917",
"FA918",
"FA919",
"FA920",
"FA922",
"FA923",
"FA925",
"FA926",
"FA927",
"FA929",
"FA930",
"FA931",
"FA932",
"FA933",
"FA935",
"FA936",
"FA937",
"FA938",
"FA939",
"FA941",
"FA942",
"FA943",
"FA944",
"FA945",
"FA946",
"FA947",
"FA948",
"FA949",
"FA950",
"FA951",
"FA952",
"FA953",
"FA954",
"FA955",
"FA956",
"FA958",
"FA964",
"FA965",
"FA966",
"FA967",
"FA968",
"FA969",
"FA971",
"FA974",
"FA975",
"FA976",
"FA977",
"FA979",
"FA980",
"FA990",
"FA991",
"FA992",
"FA993"]

# authenticates the session
auth = requests.post(baseURL + '/users/'+user+'/login?password='+password).json()
session = auth["session"]
headers = {'X-ArchivesSpace-Session':session}

# Gets the IDs of all resources in the repository
print 'Getting a list of resources'
resourceIds = requests.get(baseURL + '/repositories/'+repository+'/resources?all_ids=true', headers=headers)

for id in resourceIds.json():
    resource = (requests.get(baseURL + '/repositories/'+repository+'/resources/' + str(id), headers=headers)).json()
    resourceID = resource["id_0"]
    # Publish the resource record if it's in the publish list...
    if resourceID in publishIDs or resourceID.startswith('LI'):
        resource["publish"] = True
        updated = requests.post(baseURL + '/repositories/'+repository+'/resources/' + str(id), headers=headers, data=json.dumps(resource))
        print resourceID + ' published'
    # ...otherwise unpublish the resource record
    else:
        resource["publish"] = False
        updated = requests.post(baseURL + '/repositories/'+repository+'/resources/' + str(id), headers=headers, data=json.dumps(resource))
        print resourceID + ' unpublished'
print 'Done!'
